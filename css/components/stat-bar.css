/* =============================================================================
   STAT BAR COMPONENT - v0.6.0
   =============================================================================
   Reusable progress bar component for HP, MP, Limit, and other stats.
   Used within character panels and standalone displays.

   Structure:
   .stat-row
     .stat-label
     .stat-bar-outer
       .stat-bar[.hp-bar|.mana-bar|.limit-bar]
     .stat-value

   Bar Types:
   - .hp-bar: Health (green→yellow→red based on .hp-high/.hp-medium/.hp-low)
   - .mana-bar: Mana/MP (blue)
   - .limit-bar: Limit break (purple, gold when ready)

   States:
   - .hp-regen, .mana-regen: Pulsing glow effect for regeneration
   - .limit-high, .limit-ready: Building/ready states for limit bar
============================================================================= */

/* === Stat Row Container === */
.stat-row {
    display: flex;
    align-items: center;
    margin-bottom: 0.375rem;
}

/* Fallback spacing for browsers without gap */
.stat-row > * {
    margin-right: 0.375rem;
}
.stat-row > *:last-child {
    margin-right: 0;
}

@supports (gap: 0.375rem) {
    .stat-row {
        gap: 0.375rem;
    }
    .stat-row > * {
        margin-right: 0;
    }
}

/* === Stat Label === */
.stat-label {
    font-size: 0.7rem;
    font-weight: bold;
    text-transform: uppercase;
    min-width: 1.375rem;
    color: var(--battle-text-dim, rgba(255, 255, 255, 0.7));
}

/* === Bar Container === */
.stat-bar-outer {
    flex: 1;
    height: 0.75rem;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 0.25rem;
    overflow: hidden;
    border: 0.0625rem solid rgba(255, 255, 255, 0.1);
}

/* === Bar Fill === */
.stat-bar {
    height: 100%;
    transition: width 0.3s ease-out;
    border-radius: 0.1875rem;
}

/* === Stat Value === */
.stat-value {
    font-size: 0.65rem;
    min-width: 2.25rem;
    text-align: right;
    color: var(--battle-text, #fff);
}

/* =============================================================================
   HP BAR STATES
============================================================================= */

.stat-bar.hp-bar.hp-high {
    background: var(--battle-hp-high, linear-gradient(to bottom, #4caf50, #388e3c));
}

.stat-bar.hp-bar.hp-medium {
    background: var(--battle-hp-medium, linear-gradient(to bottom, #ff9800, #f57c00));
}

.stat-bar.hp-bar.hp-low {
    background: var(--battle-hp-low, linear-gradient(to bottom, #f44336, #d32f2f));
    animation: stat-bar-pulse 0.5s ease-in-out infinite alternate;
}

@keyframes stat-bar-pulse {
    from { opacity: 1; }
    to { opacity: 0.7; }
}

/* =============================================================================
   MANA BAR
============================================================================= */

.stat-bar.mana-bar {
    background: var(--battle-mana, linear-gradient(to bottom, #2196f3, #1976d2));
}

/* =============================================================================
   LIMIT BAR STATES
============================================================================= */

.stat-bar.limit-bar {
    background: var(--battle-limit, linear-gradient(to bottom, #9c27b0, #7b1fa2));
}

.stat-bar.limit-bar.limit-high {
    background: var(--battle-limit-ready, linear-gradient(to bottom, #ffd700, #ffc107));
    animation: limit-bar-pulse 1s infinite;
}

.stat-bar.limit-bar.limit-ready {
    background: var(--battle-limit-ready, linear-gradient(to bottom, #ffd700, #ffc107));
    animation: limit-bar-ready-pulse 0.5s infinite;
}

@keyframes limit-bar-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

@keyframes limit-bar-ready-pulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 4px var(--battle-limit-ready); }
    50% { opacity: 0.9; box-shadow: 0 0 10px var(--battle-limit-ready); }
}

/* Special styling for limit label */
.stat-label.limit-label {
    color: #ffd700;
}

/* =============================================================================
   REGEN EFFECTS
============================================================================= */

/* HP Regen - green glow */
.stat-bar.hp-bar.hp-regen {
    box-shadow: 0 0 8px #2ecc71, 0 0 12px #2ecc71;
    animation: hp-regen-glow 1.5s ease-in-out infinite;
}

@keyframes hp-regen-glow {
    0%, 100% { box-shadow: 0 0 4px #2ecc71, 0 0 8px rgba(46, 204, 113, 0.5); }
    50% { box-shadow: 0 0 10px #2ecc71, 0 0 16px rgba(46, 204, 113, 0.8); }
}

/* Mana Regen - blue glow */
.stat-bar.mana-bar.mana-regen {
    box-shadow: 0 0 8px #3498db, 0 0 12px #3498db;
    animation: mana-regen-glow 1.5s ease-in-out infinite;
}

@keyframes mana-regen-glow {
    0%, 100% { box-shadow: 0 0 4px #3498db, 0 0 8px rgba(52, 152, 219, 0.5); }
    50% { box-shadow: 0 0 10px #3498db, 0 0 16px rgba(52, 152, 219, 0.8); }
}

/* Text regen effects - label and value */
.stat-value.hp-regen,
.stat-label.hp-regen {
    color: #2ecc71;
    text-shadow: 0 0 6px rgba(46, 204, 113, 0.8);
    animation: stat-text-hp-glow 1.5s ease-in-out infinite;
}

.stat-value.mana-regen,
.stat-label.mana-regen {
    color: #3498db;
    text-shadow: 0 0 6px rgba(52, 152, 219, 0.8);
    animation: stat-text-mana-glow 1.5s ease-in-out infinite;
}

@keyframes stat-text-hp-glow {
    0%, 100% {
        color: #2ecc71;
        text-shadow: 0 0 4px rgba(46, 204, 113, 0.6);
    }
    50% {
        color: #58d68d;
        text-shadow: 0 0 10px rgba(46, 204, 113, 1);
    }
}

@keyframes stat-text-mana-glow {
    0%, 100% {
        color: #3498db;
        text-shadow: 0 0 4px rgba(52, 152, 219, 0.6);
    }
    50% {
        color: #5dade2;
        text-shadow: 0 0 10px rgba(52, 152, 219, 1);
    }
}

/* Regen text in battle log */
.regen-hp {
    color: #2ecc71;
    font-size: var(--battle-text-size, 0.95rem);
    font-weight: bold;
    animation: regen-text-pulse 1s ease-in-out infinite;
}

.regen-mp {
    color: #3498db;
    font-size: var(--battle-text-size, 0.95rem);
    font-weight: bold;
    animation: regen-text-pulse 1s ease-in-out infinite;
}

@keyframes regen-text-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

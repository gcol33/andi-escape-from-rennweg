/* =============================================================================
   LAYOUT SYSTEM - v0.6.0
   =============================================================================
   Resolution-independent layout primitives using rem units.
   All components use these tokens and primitives for consistent sizing.

   Usage:
   1. Include this file BEFORE theme CSS
   2. Use design tokens (--space-*, --text-*, etc.) for all sizes
   3. Use layout primitives (.stack, .row, .grid, .anchor--*) for positioning
   4. Only change root font-size for scaling - everything else adapts
============================================================================= */

/* =============================================================================
   DESIGN TOKENS
   All sizes in rem. 1rem = 16px at default browser settings.
============================================================================= */

:root {
    /* --- Typography Scale --- */
    --text-xs: 0.75rem;      /* 12px - tiny labels */
    --text-sm: 0.875rem;     /* 14px - small text */
    --text-md: 1rem;         /* 16px - body text */
    --text-lg: 1.25rem;      /* 20px - large text */
    --text-xl: 1.5rem;       /* 24px - headings */
    --text-2xl: 2rem;        /* 32px - titles */
    --text-3xl: 2.5rem;      /* 40px - large titles */

    /* --- Spacing Scale --- */
    --space-xs: 0.25rem;     /* 4px */
    --space-sm: 0.5rem;      /* 8px */
    --space-md: 0.75rem;     /* 12px */
    --space-lg: 1rem;        /* 16px */
    --space-xl: 1.5rem;      /* 24px */
    --space-2xl: 2rem;       /* 32px */
    --space-3xl: 3rem;       /* 48px */

    /* --- Component Dimensions --- */
    --btn-height: 3rem;      /* 48px - touch-friendly */
    --btn-min-width: 6rem;   /* 96px */
    --btn-padding-x: 1rem;
    --btn-padding-y: 0.5rem;
    --btn-radius: 0.25rem;

    --panel-padding: 1rem;
    --panel-radius: 0.5rem;
    --panel-gap: var(--space-md);

    --bar-height: 1rem;      /* HP/MP bars */
    --bar-radius: 0.25rem;

    --icon-sm: 1.5rem;
    --icon-md: 2rem;
    --icon-lg: 3rem;

    /* --- Z-Index Scale --- */
    --z-base: 0;
    --z-content: 10;
    --z-overlay: 100;
    --z-modal: 1000;
    --z-toast: 2000;
}

/* =============================================================================
   SCALE TIERS
   Orientation/device size only changes the root font-size.
   All rem-based layouts scale automatically.

   NOTE: Disabled for now to avoid breaking existing styles.
   Enable these when migrating components to use rem units.
============================================================================= */

/* TIER: Normal (landscape, larger devices) - browser default 16px */
/* :root { font-size: 16px; } */

/* TIER: Comfort (portrait) - slightly smaller */
/* @media (orientation: portrait) { :root { font-size: 14px; } } */

/* TIER: Compact (very small screens) */
/* @media (max-width: 480px) { :root { font-size: 12px; } } */

/* TIER: Large (big screens, accessibility) */
/* @media (min-width: 1920px) { :root { font-size: 18px; } } */

/* =============================================================================
   LAYOUT PRIMITIVES
============================================================================= */

/* --- Vertical Stack --- */
.stack {
    display: flex;
    flex-direction: column;
    gap: var(--stack-gap, var(--space-md));
}

.stack--center { align-items: center; }
.stack--stretch { align-items: stretch; }
.stack--gap-xs { --stack-gap: var(--space-xs); }
.stack--gap-sm { --stack-gap: var(--space-sm); }
.stack--gap-lg { --stack-gap: var(--space-lg); }
.stack--gap-xl { --stack-gap: var(--space-xl); }

/* --- Horizontal Row --- */
.row {
    display: flex;
    flex-direction: row;
    gap: var(--row-gap, var(--space-md));
    align-items: center;
}

.row--between { justify-content: space-between; }
.row--center { justify-content: center; }
.row--end { justify-content: flex-end; }
.row--wrap { flex-wrap: wrap; }
.row--gap-xs { --row-gap: var(--space-xs); }
.row--gap-sm { --row-gap: var(--space-sm); }
.row--gap-lg { --row-gap: var(--space-lg); }

/* --- Grid --- */
.grid {
    display: grid;
    grid-template-columns: repeat(var(--grid-cols, 2), 1fr);
    gap: var(--grid-gap, var(--space-md));
}

.grid--cols-1 { --grid-cols: 1; }
.grid--cols-2 { --grid-cols: 2; }
.grid--cols-3 { --grid-cols: 3; }
.grid--cols-4 { --grid-cols: 4; }
.grid--gap-sm { --grid-gap: var(--space-sm); }
.grid--gap-lg { --grid-gap: var(--space-lg); }

/* =============================================================================
   ANCHOR SYSTEM
   Position elements relative to their container using semantic anchors.
   All anchors respect safe-area-inset for notched devices.
============================================================================= */

.anchor {
    position: absolute;
    z-index: var(--z-overlay);
}

/* Corner anchors */
.anchor--top-left {
    top: max(var(--space-md), env(safe-area-inset-top));
    left: max(var(--space-md), env(safe-area-inset-left));
}

.anchor--top-right {
    top: max(var(--space-md), env(safe-area-inset-top));
    right: max(var(--space-md), env(safe-area-inset-right));
}

.anchor--bottom-left {
    bottom: max(var(--space-md), env(safe-area-inset-bottom));
    left: max(var(--space-md), env(safe-area-inset-left));
}

.anchor--bottom-right {
    bottom: max(var(--space-md), env(safe-area-inset-bottom));
    right: max(var(--space-md), env(safe-area-inset-right));
}

/* Center anchors */
.anchor--top-center {
    top: max(var(--space-md), env(safe-area-inset-top));
    left: 50%;
    transform: translateX(-50%);
}

.anchor--bottom-center {
    bottom: max(var(--space-md), env(safe-area-inset-bottom));
    left: 50%;
    transform: translateX(-50%);
}

.anchor--center {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/* Full coverage */
.anchor--full {
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}

/* Edge anchors - for full-width/height elements along edges with safe-area margin */
.anchor--bottom-edge {
    bottom: env(safe-area-inset-bottom, 0);
    left: 0;
    right: 0;
}

.anchor--top-edge {
    top: env(safe-area-inset-top, 0);
    left: 0;
    right: 0;
}

.anchor--left-edge {
    left: env(safe-area-inset-left, 0);
    top: 0;
    bottom: 0;
}

.anchor--right-edge {
    right: env(safe-area-inset-right, 0);
    top: 0;
    bottom: 0;
}

/* Flush edge anchors - no margin, just safe-area respect */
.anchor--bottom-flush {
    bottom: 0;
    left: 0;
    right: 0;
}

.anchor--top-flush {
    top: 0;
    left: 0;
    right: 0;
}


/* =============================================================================
   UTILITY CLASSES
============================================================================= */

/* Visibility */
.hidden { display: none !important; }
.invisible { visibility: hidden; }

/* Text alignment */
.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }

/* Flex utilities */
.flex-1 { flex: 1; }
.flex-shrink-0 { flex-shrink: 0; }
.flex-grow-0 { flex-grow: 0; }

/* Spacing utilities */
.p-sm { padding: var(--space-sm); }
.p-md { padding: var(--space-md); }
.p-lg { padding: var(--space-lg); }

.m-sm { margin: var(--space-sm); }
.m-md { margin: var(--space-md); }
.m-lg { margin: var(--space-lg); }

/* =============================================================================
   DEBUG MODE
   Add .debug class to body to visualize layout containers
============================================================================= */

.debug .stack,
.debug .row,
.debug .grid {
    outline: 2px dashed rgba(255, 0, 0, 0.5);
}

.debug .anchor {
    outline: 2px dashed rgba(0, 0, 255, 0.5);
}

.debug .anchor::before {
    content: attr(class);
    position: absolute;
    top: 0;
    left: 0;
    font-size: 10px;
    background: rgba(0, 0, 255, 0.8);
    color: white;
    padding: 2px 4px;
    white-space: nowrap;
}
